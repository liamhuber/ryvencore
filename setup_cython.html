
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>compile with cython &#8212; ryvencore v0.4.0a12 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/maisie.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="ryvencore.addons.default package" href="ryvencore.addons.default.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ryvencore.addons.default.html" title="ryvencore.addons.default package"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ryvencore v0.4.0a12 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">compile with cython</a></li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar">
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="ryvencore.addons.default.html"
                          title="previous chapter">ryvencore.addons.default package</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/setup_cython.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="index.html">Docs</a></li>
              
              <li>compile with cython</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <div class="section" id="module-setup_cython">
<span id="compile-with-cython"></span><h1>compile with cython<a class="headerlink" href="#module-setup_cython" title="Permalink to this heading">¶</a></h1>
<p>This setup file can be used to manually compile ryvencore to a C extension using Cython, behavior should be the same.</p>
<p>Follow the below process to compile ryvencore with Cython and install it as a regular package.
Points 1 - 4 are only necessary if they are not satisfied already.
Run all commands from the top level ‘ryvencore’ directory. The process is shown for Ubuntu Linux.
Assuming only Python is installed already:</p>
<ol class="arabic simple">
<li>Remove old ryvencore versions</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pip uninstall ryvencore
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Install GCC</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo apt install build-essential
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Install Python dev tools</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo apt install python3-dev
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li>Install Python dependencies</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pip install cython wheel
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li>Compile</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ python -m setup_cython build_ext --inplace
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li>Build wheel</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ python setup_cython.py sdist bdist_wheel
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li>Install package from wheel</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pip install ./dist/ryvencore-&lt;version&gt;-&lt;platform&gt;.whl
</pre></div>
</div>
<p>NOTE</p>
<ul class="simple">
<li>if you don’t want to keep the source files (.py and compiled .c) in the installed package (only the compiled .so files), simply comment out the line <cite>packages = find:</cite> in setup.cfg</li>
<li>you can remove all the generated files and directories by running <code class="code docutils literal notranslate"><span class="pre">python</span> <span class="pre">cleanup_cython.py</span></code></li>
</ul>
<p>To verify that the package successfully runs from the compiled C extension modules you can check whether
the imported ryvencore package shows the <code class="code docutils literal notranslate"><span class="pre">__init__.so</span></code> file and not <code class="code docutils literal notranslate"><span class="pre">__init__.py</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ python
&gt; import ryvencore as rc
&gt; print<span class="o">(</span>rc<span class="o">)</span>
</pre></div>
</div>
<p>and to really be sure you can also manually remove all .py files in the installation directory</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>.../site-packages/ryvencore&gt; find . -name <span class="s2">&quot;*.py&quot;</span> -type f -delete
</pre></div>
</div>
<p>and check whether you can successfully load the package from Python.</p>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="ryvencore.addons.default.html" title="previous chapter (use the left arrow)">ryvencore.addons.default package</a>
      </div>
    
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ryvencore.addons.default.html" title="ryvencore.addons.default package"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ryvencore v0.4.0a12 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">compile with cython</a></li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2022, Leon Thomm. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  </body>
</html>